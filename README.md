# HOE Chat Bot

Telegram –±–æ—Ç –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –ø–ª–∞–Ω–æ–≤–∏—Ö –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó –∑ [hoe.com.ua](https://hoe.com.ua).

## –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- ‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–∂–Ω—ñ 30 —Ö–≤–∏–ª–∏–Ω
- üì± –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤ Telegram –ø—Ä–æ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- üë• –°–∏—Å—Ç–µ–º–∞ –ø—ñ–¥–ø–∏—Å–æ–∫ ‚Äî –∫—ñ–ª—å–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –º–æ–∂—É—Ç—å –ø—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—å
- ü§ñ –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞: `/start`, `/stop`, `/status`
- üîÑ –£–Ω–∏–∫–Ω–µ–Ω–Ω—è –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö –æ–¥–Ω–∞–∫–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- üîÅ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–æ–≤—Ç–æ—Ä–Ω—ñ —Å–ø—Ä–æ–±–∏ –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö –º–µ—Ä–µ–∂—ñ
- üê≥ Docker —Ç–∞ Docker Compose –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
- üìù –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è

## –í–∏–º–æ–≥–∏

- Node.js >= 18.0.0
- Telegram Bot Token (–æ—Ç—Ä–∏–º–∞—Ç–∏ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather))
- Chat ID –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
# –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
git clone <repository-url>
cd hoe-chat-bot

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
npm install

# –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
cp .env.example .env

# –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è .env —Ñ–∞–π–ª—É
nano .env
```

## –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –∑–º—ñ–Ω–Ω–∏–º–∏:

```env
# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_here

# HOE API Configuration
HOE_API_URL=https://hoe.com.ua/shutdown-events
HOE_STREET_ID=280782
HOE_HOUSE=33

# Scheduler Configuration (cron expression)
CRON_SCHEDULE=*/30 * * * *

# Retry Configuration
RETRY_ATTEMPTS=3
RETRY_DELAY_MS=5000

# Request timeout in milliseconds
REQUEST_TIMEOUT_MS=30000
```

### –Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ Chat ID

1. –ù–∞–ø–∏—à—ñ—Ç—å –±–æ—Ç—É [@userinfobot](https://t.me/userinfobot)
2. –í—ñ–Ω –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç—å –≤–∞–º –≤–∞—à–∏–º Chat ID

## –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---------|------|
| `/start` | –ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—å –Ω–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è |
| `/stop` | –í—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—å –≤—ñ–¥ —Å–ø–æ–≤—ñ—â–µ–Ω—å |
| `/status` | –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –ø—ñ–¥–ø–∏—Å–∫–∏ |

–ë–æ—Ç –ø—ñ–¥—Ç—Ä–∏–º—É—î –ø—ñ–¥–ø–∏—Å–∫—É –∫—ñ–ª—å–∫–æ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ. –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å—Å—è –≤—Å—ñ–º –ø—ñ–¥–ø–∏—Å–∞–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º + Chat ID –∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.

## –ó–∞–ø—É—Å–∫

### Development

```bash
npm run dev
```

### Production

```bash
# –ó–±—ñ—Ä–∫–∞
npm run build

# –ó–∞–ø—É—Å–∫
npm start

# –ó–∞–ø—É—Å–∫ –∑ –Ω–µ–≥–∞–π–Ω–æ—é –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é
npm start -- --check-now
```

### Docker

```bash
# –ó–±—ñ—Ä–∫–∞ –æ–±—Ä–∞–∑—É
docker build -t hoe-chat-bot .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -d \
  --name hoe-chat-bot \
  --env-file .env \
  -v ./state:/app/.state \
  hoe-chat-bot
```

### Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

```bash
# –ó–±—ñ—Ä–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫
docker-compose up -d

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
docker-compose logs -f

# –ó—É–ø–∏–Ω–∫–∞
docker-compose down
```

–§–∞–π–ª `docker-compose.yml`:

```yaml
version: '3.8'

services:
  hoe-bot:
    build: .
    container_name: hoe-chat-bot
    restart: unless-stopped
    env_file:
      - .env
    volumes:
      - ./state:/app/.state
```

> **–ü—Ä–∏–º—ñ—Ç–∫–∞:** Volume `./state:/app/.state` –∑–±–µ—Ä—ñ–≥–∞—î —Å—Ç–∞–Ω –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤ —Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—é –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –º—ñ–∂ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
src/
‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îú‚îÄ‚îÄ providers/       # –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ API
‚îÇ   ‚îú‚îÄ‚îÄ hoe.provider.ts      # HOE API –∫–ª—ñ—î–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ telegram.provider.ts # Telegram Bot API
‚îú‚îÄ‚îÄ repositories/    # –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É
‚îÇ   ‚îî‚îÄ‚îÄ state.repository.ts  # –§–∞–π–ª–æ–≤–µ —Å—Ö–æ–≤–∏—â–µ
‚îú‚îÄ‚îÄ services/        # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ shutdown.service.ts    # –û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ–π –≤—ñ–¥–∫–ª—é—á–µ–Ω—å
‚îÇ   ‚îî‚îÄ‚îÄ notification.service.ts # –í—ñ–¥–ø—Ä–∞–≤–∫–∞ —Å–ø–æ–≤—ñ—â–µ–Ω—å
‚îú‚îÄ‚îÄ types/           # TypeScript —Ç–∏–ø–∏
‚îú‚îÄ‚îÄ utils/           # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ logger.ts    # –õ–æ–≥—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ retry.ts     # –ü–æ–≤—Ç–æ—Ä–Ω—ñ —Å–ø—Ä–æ–±–∏
‚îÇ   ‚îî‚îÄ‚îÄ hash.ts      # –•–µ—à—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç—É
‚îî‚îÄ‚îÄ index.ts         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
```

## –§–æ—Ä–º–∞—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

### –ü—Ä–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å:

```
‚ö° –ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è (2)

1. –ü–ª–∞–Ω–æ–≤–µ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
üìÖ –ü–æ—á–∞—Ç–æ–∫: 15.02.2026, 09:00
üìÖ –ö—ñ–Ω–µ—Ü—å: 15.02.2026, 17:00
üìã –°—Ç–∞—Ç—É—Å: –ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ
üìç –ê–¥—Ä–µ—Å–∞: –≤—É–ª. –ü—Ä–∏–∫–ª–∞–¥–Ω–∞, 33

2. –ê–≤–∞—Ä—ñ–π–Ω–µ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
üìÖ –ü–æ—á–∞—Ç–æ–∫: 16.02.2026, 10:00
üìÖ –ö—ñ–Ω–µ—Ü—å: 16.02.2026, 14:00
üìã –°—Ç–∞—Ç—É—Å: –ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ
üí¨ –ö–æ–º–µ–Ω—Ç–∞—Ä: –†–µ–º–æ–Ω—Ç–Ω—ñ —Ä–æ–±–æ—Ç–∏
```

### –ü—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å:

```
‚úÖ –ï–ª–µ–∫—Ç—Ä–æ—Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è —î
```

## –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É

–ë–æ—Ç –∑–±–µ—Ä—ñ–≥–∞—î —Å—Ç–∞–Ω —É —Ñ–∞–π–ª—ñ `.state/state.json`:

```json
{
  "lastMessageHash": "abc123...",
  "lastCheckTime": "2026-02-12T10:30:00.000Z",
  "lastEventIds": ["123", "456"],
  "subscribers": [123456789, 987654321]
}
```

- `lastMessageHash` ‚Äî —Ö–µ—à –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- `lastCheckTime` ‚Äî —á–∞—Å –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
- `lastEventIds` ‚Äî ID –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –ø–æ–¥—ñ–π
- `subscribers` ‚Äî —Å–ø–∏—Å–æ–∫ Chat ID –ø—ñ–¥–ø–∏—Å–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT
